<!--pages/index/index.wxml-->
<view class="container theme-{{theme}}">
  <!-- Â§¥ÈÉ®Âå∫Âüü -->
  <view class="header">
    <text class="title">Ê≠£Âú®ÂÅö‰ªÄ‰πà</text>
    <text class="subtitle">{{totalCount}}‰∫∫Âú®Á∫ø</text>
  </view>

  <!-- ÊªöÂä®Âå∫Âüü -->
  <scroll-view class="scroll-area" scroll-y enhanced show-scrollbar="{{false}}">
    <!-- Ââç3ÂêçÂ±ïÁ§∫Âå∫ (PodiumÊ†∑Âºè) -->
    <view class="podium-container" wx:if="{{topThree.length > 0}}">
      <view class="podium">
        <!-- Á¨¨2Âêç -->
        <view class="podium-item rank-2" wx:if="{{topThree[1]}}">
          <view class="rank-badge silver">2</view>
          <view class="avatar-container" 
                bindtap="selectStatus" 
                data-id="{{topThree[1].id}}">
            <view class="avatar-border silver-gradient">
              <text class="emoji">{{topThree[1].icon}}</text>
            </view>
          </view>
          <text class="status-name">{{topThree[1].name}}</text>
          <text class="status-count">{{topThree[1].count}}‰∫∫</text>
        </view>

        <!-- Á¨¨1Âêç -->
        <view class="podium-item rank-1" wx:if="{{topThree[0]}}">
          <text class="crown">üëë</text>
          <view class="rank-badge gold">1</view>
          <view class="avatar-container champion" 
                bindtap="selectStatus" 
                data-id="{{topThree[0].id}}">
            <view class="avatar-border gold-gradient">
              <text class="emoji large">{{topThree[0].icon}}</text>
            </view>
          </view>
          <text class="status-name">{{topThree[0].name}}</text>
          <text class="status-count large">{{topThree[0].count}}‰∫∫</text>
        </view>

        <!-- Á¨¨3Âêç -->
        <view class="podium-item rank-3" wx:if="{{topThree[2]}}">
          <view class="rank-badge bronze">3</view>
          <view class="avatar-container" 
                bindtap="selectStatus" 
                data-id="{{topThree[2].id}}">
            <view class="avatar-border bronze-gradient">
              <text class="emoji">{{topThree[2].icon}}</text>
            </view>
          </view>
          <text class="status-name">{{topThree[2].name}}</text>
          <text class="status-count">{{topThree[2].count}}‰∫∫</text>
        </view>
      </view>
    </view>

    <!-- Á¨¨4ÂêçÂèä‰ª•ÂêéÂ±ïÁ§∫Âå∫ (ÂàóË°®Ê†∑Âºè) -->
    <view class="status-list">
      <view 
        class="status-card {{item.isMine ? 'mine' : ''}}"
        wx:for="{{restList}}" 
        wx:key="id"
        bindtap="selectStatus"
        data-id="{{item.id}}"
      >
        <view class="card-left">
          <view class="rank-number">{{item.rank}}</view>
          <text class="emoji">{{item.icon}}</text>
          <text class="name">{{item.name}}</text>
        </view>
        <view class="card-right">
          <text class="count">{{item.count}}‰∫∫</text>
          <text class="active-tag" wx:if="{{item.isMine}}">ËøõË°å‰∏≠</text>
        </view>
      </view>
    </view>

    <!-- Â∫ïÈÉ®ÂÆâÂÖ®Ë∑ùÁ¶ª -->
    <view class="bottom-safe-area"></view>
  </scroll-view>

  <!-- Ëá™ÂÆö‰πâ TabBar -->
  <tabbar current="0" bind:change="onTabChange"></tabbar>

  <!-- ÊåÅÁª≠Êó∂Èó¥ÈÄâÊã©Âô® -->
  <duration-picker 
    show="{{showDurationPicker}}"
    bind:cancel="onDurationCancel"
    bind:confirm="onDurationConfirm"
  ></duration-picker>

  <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">Âä†ËΩΩ‰∏≠...</text>
  </view>
</view>
